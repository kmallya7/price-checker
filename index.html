<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cost Calculator</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body { 
            background: url('https://github.com/kmallya7/price-checker/blob/main/BG.png?raw=true') no-repeat center center fixed; 
            background-size: cover;
            color: #333;
        }
        h1, h2, h3 {
            text-align: center;
            color: #444;
        }
        .container {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .section {
            flex: 1;
            margin: 10px;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            border: none;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .table {
            font-size: 13px;
        }
        .table td, .table th {
            vertical-align: middle;
            padding: 6px;
        }
        .table th {
            background-color: #f2f2f2;
        }
        label {
            display: block;
            margin: 10px 0 5px;
            color: #666;
        }
        .input-group, .form-control {
            margin-bottom: 15px;
        }
        .btn {
            width: 100%;
            padding: 8px;
            font-size: 14px;
        }
        .ingredients-container {
            padding: 20px;
        }
        .compact-table {
            width: auto;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <h1>Baking Cost Calculator</h1>
    <div class="container">
        <div class="section">
            <h2>Calculate Cost</h2>
            <form id="calculateForm">
                <label for="ingredientSelect">Select Ingredient:</label>
                <select id="ingredientSelect" class="form-control"></select><br>
                <label for="usedWeight">Weight Used:</label>
                <div class="input-group">
                    <input type="number" id="usedWeight" step="0.01" class="form-control">
                    <select id="weightUnit" class="form-control">
                        <option value="grams">grams</option>
                        <option value="kilograms">kilograms</option>
                        <option value="milliliters">milliliters</option>
                        <option value="liters">liters</option>
                    </select>
                </div>
                <button type="button" class="btn btn-success mt-3" onclick="calculateUsedCost()">Calculate Cost</button>
            </form>
        </div>
        <div class="section">
            <h2>Calculation Summary</h2>
            <table id="calculationSummaryTable" class="table table-bordered table-sm">
                <thead>
                    <tr>
                        <th>Ingredient Name</th>
                        <th>Weight Used</th>
                        <th>Cost (₹)</th>
                    </tr>
                </thead>
                <tbody id="calculationSummaryBody">
                    <!-- Rows will be added dynamically -->
                </tbody>
            </table>
            <h2>Total Cost: ₹<span id="totalCost">0</span></h2>
        </div>
    </div>
    <div class="ingredients-container">
        <h2>Ingredients List</h2>
        <table id="ingredientsTable" class="table table-bordered table-sm compact-table">
            <thead>
                <tr>
                    <th>Ingredient Name</th>
                    <th>Total Weight</th>
                    <th>Total Cost (₹)</th>
                </tr>
            </thead>
            <tbody id="ingredientsTableBody">
                <!-- Rows will be added dynamically -->
            </tbody>
        </table>
    </div>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        const ingredients = [
            { name: 'Cream cheese', totalWeight: '1 KG', totalCost: 750 },
            { name: 'Whipping cream topolite', totalWeight: '1 KG', totalCost: 170 },
            { name: 'Amul butter', totalWeight: '1 KG', totalCost: 580 },
            { name: 'IFF Vanilla', totalWeight: '500 ML', totalCost: 230 },
            { name: 'Milk choco chips', totalWeight: '250 GM', totalCost: 110 },
            { name: 'Caster sugar', totalWeight: '1 KG', totalCost: 120 },
            { name: 'Icing sugar', totalWeight: '1 KG', totalCost: 130 },
            { name: 'Cake gel', totalWeight: '1 KG', totalCost: 95 },
            { name: 'Fresh cream', totalWeight: '500 GM', totalCost: 275 },
            { name: 'Milk maid', totalWeight: '380 GM', totalCost: 134 },
            { name: 'Hazelnut paste', totalWeight: '1 KG', totalCost: 500 },
            { name: 'Morde dark chocolate', totalWeight: '500 GM', totalCost: 195 },
            { name: 'Morde white compound', totalWeight: '500 GM', totalCost: 185 },
            { name: 'Pectin', totalWeight: '250 GM', totalCost: 440 },
            { name: 'Bread improver', totalWeight: '500 GM', totalCost: 105 },
            { name: 'Gluten', totalWeight: '1 KG', totalCost: 240 },
            { name: 'Morde dark compound', totalWeight: '500 GM', totalCost: 320 },
            { name: 'Milk powder', totalWeight: '250 GM', totalCost: 100 },
            { name: 'Raagi powder', totalWeight: '500 GM', totalCost: 50 },
            { name: 'Whipping cream rich', totalWeight: '500 GM', totalCost: 148 }
        ];

        const calculations = [];

function populateIngredientsTable() {
    const tableBody = document.getElementById('ingredientsTableBody');
    tableBody.innerHTML = '';
    ingredients.forEach((ingredient, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${ingredient.name}</td>
            <td>${ingredient.totalWeight}</td>
            <td>₹${ingredient.totalCost}</td>
        `;
        tableBody.appendChild(row);
    });
}

function populateIngredientSelect() {
    const select = document.getElementById('ingredientSelect');
    select.innerHTML = '';
    ingredients.forEach((ingredient, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = ingredient.name;
        select.appendChild(option);
    });
}

function calculateUsedCost() {
    const selectedIndex = document.getElementById('ingredientSelect').value;
    const selectedIngredient = ingredients[selectedIndex];
    const usedWeight = parseFloat(document.getElementById('usedWeight').value);
    const weightUnit = document.getElementById('weightUnit').value;
    const totalWeightInGrams = convertToGrams(selectedIngredient.totalWeight);

    if (isNaN(totalWeightInGrams) || isNaN(selectedIngredient.totalCost) || isNaN(usedWeight)) {
        alert("Please enter valid numbers.");
        return;
    }

    const usedWeightInGrams = convertToGrams(usedWeight + ' ' + weightUnit);
    const costPerGram = selectedIngredient.totalCost / totalWeightInGrams;
    const usedCost = costPerGram * usedWeightInGrams;

    // Store the calculation in the calculations array
    calculations.push({
        name: selectedIngredient.name,
        usedWeight: `${usedWeight} ${weightUnit}`,
        cost: usedCost.toFixed(2)
    });

    // Update the calculation summary table
    updateCalculationSummary();
}

function convertToGrams(weightStr) {
    const weight = parseFloat(weightStr);
    if (weightStr.includes('KG') || weightStr.includes('kilograms')) {
        return weight * 1000;
    } else if (weightStr.includes('ML') || weightStr.includes('milliliters')) {
        return weight; // Assuming density is 1:1 for simplicity
    } else if (weightStr.includes('liters')) {
        return weight * 1000; // Assuming density is 1:1 for simplicity
    } else if (weightStr.includes('GM') || weightStr.includes('grams')) {
        return weight;
    }
    return NaN; // Not a valid weight
}

function updateCalculationSummary() {
    const tableBody = document.getElementById('calculationSummaryBody');
    tableBody.innerHTML = '';
    let totalCost = 0;
    calculations.forEach((calculation, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${calculation.name}</td>
            <td>${calculation.usedWeight}</td>
            <td>₹${calculation.cost}</td>
            <td>
                <button class="btn btn-primary btn-sm" onclick="editCalculation(${index})">Edit</button>
                <button class="btn btn-danger btn-sm" onclick="deleteCalculation(${index})">Delete</button>
            </td>
        `;
        totalCost += parseFloat(calculation.cost);
        tableBody.appendChild(row);
    });
    document.getElementById('totalCost').textContent = totalCost.toFixed(2);
}

function editIngredient(index) {
    const ingredient = ingredients[index];
    const name = prompt("Edit Ingredient Name:", ingredient.name);
    const totalWeight = prompt("Edit Total Weight:", ingredient.totalWeight);
    const totalCost = prompt("Edit Total Cost (₹):", ingredient.totalCost);

    if (name && totalWeight && totalCost && !isNaN(totalCost)) {
        ingredients[index] = {
            name: name,
            totalWeight: totalWeight,
            totalCost: parseFloat(totalCost)
        };
        populateIngredientsTable();
        populateIngredientSelect();
    } else {
        alert("Please enter valid details.");
    }
}

function deleteIngredient(index) {
    ingredients.splice(index, 1);
    populateIngredientsTable();
    populateIngredientSelect();
}

function editCalculation(index) {
    const calculation = calculations[index];
    const newWeight = prompt("Edit Weight Used:", calculation.usedWeight.split(' ')[0]);
    const newUnit = prompt("Edit Unit (grams/kilograms/milliliters/liters):", calculation.usedWeight.split(' ')[1]);
    const ingredient = ingredients.find(ing => ing.name === calculation.name);

    if (ingredient && newWeight && newUnit && !isNaN(newWeight)) {
        const totalWeightInGrams = convertToGrams(ingredient.totalWeight);
        const usedWeightInGrams = convertToGrams(`${newWeight} ${newUnit}`);
        const costPerGram = ingredient.totalCost / totalWeightInGrams;
        const usedCost = costPerGram * usedWeightInGrams;

        calculations[index] = {
            name: calculation.name,
            usedWeight: `${newWeight} ${newUnit}`,
            cost: usedCost.toFixed(2)
        };

        updateCalculationSummary();
    } else {
        alert("Please enter valid details.");
    }
}

function deleteCalculation(index) {
    calculations.splice(index, 1);
    updateCalculationSummary();
}

// Populate table and select options on page load
document.addEventListener('DOMContentLoaded', () => {
    populateIngredientsTable();
    populateIngredientSelect();
});
    </script>
</body>
</html>
